; ModuleID = 'tests/hello.cpp'
target datalayout = "e-p:64:64:64-i1:8:8-i8:8:8-i16:16:16-i32:32:32-i64:64:64-f32:32:32-f64:64:64-v64:64:64-v128:128:128-a0:0:64-s0:64:64-f80:128:128-n8:16:32:64-S128"
target triple = "x86_64-pc-linux-gnu"

%"class.std::ios_base::Init" = type { i8 }
%"class.std::basic_ostream" = type { i32 (...)**, %"class.std::basic_ios" }
%"class.std::basic_ios" = type { %"class.std::ios_base", %"class.std::basic_ostream"*, i8, i8, %"class.std::basic_streambuf"*, %"class.std::ctype"*, %"class.std::num_put"*, %"class.std::num_get"* }
%"class.std::ios_base" = type { i32 (...)**, i64, i64, i32, i32, i32, %"struct.std::ios_base::_Callback_list"*, %"struct.std::ios_base::_Words", [8 x %"struct.std::ios_base::_Words"], i32, %"struct.std::ios_base::_Words"*, %"class.std::locale" }
%"struct.std::ios_base::_Callback_list" = type { %"struct.std::ios_base::_Callback_list"*, void (i32, %"class.std::ios_base"*, i32)*, i32, i32 }
%"struct.std::ios_base::_Words" = type { i8*, i64 }
%"class.std::locale" = type { %"class.std::locale::_Impl"* }
%"class.std::locale::_Impl" = type { i32, %"class.std::locale::facet"**, i64, %"class.std::locale::facet"**, i8** }
%"class.std::locale::facet" = type { i32 (...)**, i32 }
%"class.std::basic_streambuf" = type { i32 (...)**, i8*, i8*, i8*, i8*, i8*, i8*, %"class.std::locale" }
%"class.std::ctype" = type { %"class.std::locale::facet", %struct.__locale_struct*, i8, i32*, i32*, i16*, i8, [256 x i8], [256 x i8], i8 }
%struct.__locale_struct = type { [13 x %struct.__locale_data*], i16*, i32*, i32*, [13 x i8*] }
%struct.__locale_data = type opaque
%"class.std::num_put" = type { %"class.std::locale::facet" }
%"class.std::num_get" = type { %"class.std::locale::facet" }
%"class.std::allocator" = type { i8 }
%"class.std::basic_string" = type { %"struct.std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Alloc_hider" }
%"struct.std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Alloc_hider" = type { i8* }
%"struct.std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep" = type { %"struct.std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep_base" }
%"struct.std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep_base" = type { i64, i64, i32 }

@_ZStL8__ioinit = internal global %"class.std::ios_base::Init" zeroinitializer, align 1
@__dso_handle = external global i8
@.str = private unnamed_addr constant [5 x i8] c"Hey!\00", align 1
@.str1 = private unnamed_addr constant [13 x i8] c"Hey, listen!\00", align 1
@.str2 = private unnamed_addr constant [11 x i8] c"Hey, look!\00", align 1
@.str3 = private unnamed_addr constant [8 x i8] c"Heywut!\00", align 1
@_ZSt4cout = external global %"class.std::basic_ostream"
@_ZNSs4_Rep20_S_empty_rep_storageE = external global [0 x i64]
@llvm.global_ctors = appending global [1 x { i32, void ()* }] [{ i32, void ()* } { i32 65535, void ()* @_GLOBAL__I_a }]

declare void @_ZNSt8ios_base4InitC1Ev(%"class.std::ios_base::Init"*)

declare void @_ZNSt8ios_base4InitD1Ev(%"class.std::ios_base::Init"*)

declare i32 @__cxa_atexit(void (i8*)*, i8*, i8*) nounwind

define i32 @main() uwtable {
  %1 = alloca i32, align 4
  %2 = alloca %"class.std::allocator", align 1
  %3 = alloca i32, align 4
  %4 = alloca %"class.std::allocator", align 1
  %s = alloca %"class.std::basic_string", align 8
  %5 = getelementptr inbounds %"class.std::basic_string"* %s, i64 0, i32 0, i32 0
  %6 = getelementptr inbounds %"class.std::allocator"* %4, i64 0, i32 0
  %.0.cast12 = bitcast i32* %3 to i8*
  br label %7

; <label>:7                                       ; preds = %0, %_ZNSsD1Ev.exit
  %i.016 = phi i32 [ 0, %0 ], [ %52, %_ZNSsD1Ev.exit ]
  store i8* bitcast (i64* getelementptr inbounds ([0 x i64]* @_ZNSs4_Rep20_S_empty_rep_storageE, i64 0, i64 3) to i8*), i8** %5, align 8, !tbaa !0
  switch i32 %i.016, label %31 [
    i32 0, label %8
    i32 1, label %27
    i32 2, label %29
  ]

; <label>:8                                       ; preds = %7
  %9 = invoke %"class.std::basic_string"* @_ZNSs6assignEPKcm(%"class.std::basic_string"* %s, i8* getelementptr inbounds ([5 x i8]* @.str, i64 0, i64 0), i64 4)
          to label %_ZNSsaSEPKc.exit unwind label %10

; <label>:10                                      ; preds = %_ZNSsaSEPKc.exit, %31, %29, %27, %8
  %11 = landingpad { i8*, i32 } personality i8* bitcast (i32 (...)* @__gxx_personality_v0 to i8*)
          cleanup
  %12 = getelementptr inbounds %"class.std::allocator"* %2, i64 0, i32 0
  call void @llvm.lifetime.start(i64 -1, i8* %12)
  %13 = load i8** %5, align 8, !tbaa !0
  %14 = getelementptr inbounds i8* %13, i64 -24
  %15 = bitcast i8* %14 to %"struct.std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep"*
  %16 = icmp eq i8* %14, bitcast ([0 x i64]* @_ZNSs4_Rep20_S_empty_rep_storageE to i8*)
  br i1 %16, label %55, label %17, !prof !3

; <label>:17                                      ; preds = %10
  %18 = getelementptr inbounds i8* %13, i64 -8
  %19 = bitcast i8* %18 to i32*
  br i1 icmp ne (i8* bitcast (i32 (i64)* @pthread_cancel to i8*), i8* null), label %20, label %22

; <label>:20                                      ; preds = %17
  %.0.cast15 = bitcast i32* %1 to i8*
  call void @llvm.lifetime.start(i64 4, i8* %.0.cast15)
  %21 = atomicrmw volatile add i32* %19, i32 -1 acq_rel
  store i32 %21, i32* %1, align 4
  %.0.load13 = load volatile i32* %1, align 4
  call void @llvm.lifetime.end(i64 4, i8* %.0.cast15)
  br label %_ZN9__gnu_cxxL27__exchange_and_add_dispatchEPii.exit.i.i.i7

; <label>:22                                      ; preds = %17
  %23 = load i32* %19, align 4, !tbaa !4
  %24 = add nsw i32 %23, -1
  store i32 %24, i32* %19, align 4, !tbaa !4
  br label %_ZN9__gnu_cxxL27__exchange_and_add_dispatchEPii.exit.i.i.i7

_ZN9__gnu_cxxL27__exchange_and_add_dispatchEPii.exit.i.i.i7: ; preds = %22, %20
  %.0.i.i.i.i6 = phi i32 [ %.0.load13, %20 ], [ %23, %22 ]
  %25 = icmp slt i32 %.0.i.i.i.i6, 1
  br i1 %25, label %26, label %55

; <label>:26                                      ; preds = %_ZN9__gnu_cxxL27__exchange_and_add_dispatchEPii.exit.i.i.i7
  call void @_ZNSs4_Rep10_M_destroyERKSaIcE(%"struct.std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep"* %15, %"class.std::allocator"* %2) nounwind
  br label %55

; <label>:27                                      ; preds = %7
  %28 = invoke %"class.std::basic_string"* @_ZNSs6assignEPKcm(%"class.std::basic_string"* %s, i8* getelementptr inbounds ([13 x i8]* @.str1, i64 0, i64 0), i64 12)
          to label %_ZNSsaSEPKc.exit unwind label %10

; <label>:29                                      ; preds = %7
  %30 = invoke %"class.std::basic_string"* @_ZNSs6assignEPKcm(%"class.std::basic_string"* %s, i8* getelementptr inbounds ([11 x i8]* @.str2, i64 0, i64 0), i64 10)
          to label %_ZNSsaSEPKc.exit unwind label %10

; <label>:31                                      ; preds = %7
  %32 = invoke %"class.std::basic_string"* @_ZNSs6assignEPKcm(%"class.std::basic_string"* %s, i8* getelementptr inbounds ([8 x i8]* @.str3, i64 0, i64 0), i64 7)
          to label %_ZNSsaSEPKc.exit unwind label %10

_ZNSsaSEPKc.exit:                                 ; preds = %31, %29, %27, %8
  %33 = load i8** %5, align 8, !tbaa !0
  %34 = getelementptr inbounds i8* %33, i64 -24
  %35 = bitcast i8* %34 to i64*
  %36 = load i64* %35, align 8, !tbaa !5
  %37 = invoke %"class.std::basic_ostream"* @_ZSt16__ostream_insertIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_PKS3_l(%"class.std::basic_ostream"* @_ZSt4cout, i8* %33, i64 %36)
          to label %_ZStlsIcSt11char_traitsIcESaIcEERSt13basic_ostreamIT_T0_ES7_RKSbIS4_S5_T1_E.exit unwind label %10

_ZStlsIcSt11char_traitsIcESaIcEERSt13basic_ostreamIT_T0_ES7_RKSbIS4_S5_T1_E.exit: ; preds = %_ZNSsaSEPKc.exit
  call void @llvm.lifetime.start(i64 -1, i8* %6)
  %38 = load i8** %5, align 8, !tbaa !0
  %39 = getelementptr inbounds i8* %38, i64 -24
  %40 = bitcast i8* %39 to %"struct.std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep"*
  %41 = icmp eq i8* %39, bitcast ([0 x i64]* @_ZNSs4_Rep20_S_empty_rep_storageE to i8*)
  br i1 %41, label %_ZNSsD1Ev.exit, label %42, !prof !3

; <label>:42                                      ; preds = %_ZStlsIcSt11char_traitsIcESaIcEERSt13basic_ostreamIT_T0_ES7_RKSbIS4_S5_T1_E.exit
  %43 = getelementptr inbounds i8* %38, i64 -8
  %44 = bitcast i8* %43 to i32*
  br i1 icmp ne (i8* bitcast (i32 (i64)* @pthread_cancel to i8*), i8* null), label %45, label %47

; <label>:45                                      ; preds = %42
  call void @llvm.lifetime.start(i64 4, i8* %.0.cast12)
  %46 = atomicrmw volatile add i32* %44, i32 -1 acq_rel
  store i32 %46, i32* %3, align 4
  %.0.load = load volatile i32* %3, align 4
  call void @llvm.lifetime.end(i64 4, i8* %.0.cast12)
  br label %_ZN9__gnu_cxxL27__exchange_and_add_dispatchEPii.exit.i.i.i

; <label>:47                                      ; preds = %42
  %48 = load i32* %44, align 4, !tbaa !4
  %49 = add nsw i32 %48, -1
  store i32 %49, i32* %44, align 4, !tbaa !4
  br label %_ZN9__gnu_cxxL27__exchange_and_add_dispatchEPii.exit.i.i.i

_ZN9__gnu_cxxL27__exchange_and_add_dispatchEPii.exit.i.i.i: ; preds = %47, %45
  %.0.i.i.i.i = phi i32 [ %.0.load, %45 ], [ %48, %47 ]
  %50 = icmp slt i32 %.0.i.i.i.i, 1
  br i1 %50, label %51, label %_ZNSsD1Ev.exit

; <label>:51                                      ; preds = %_ZN9__gnu_cxxL27__exchange_and_add_dispatchEPii.exit.i.i.i
  call void @_ZNSs4_Rep10_M_destroyERKSaIcE(%"struct.std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep"* %40, %"class.std::allocator"* %4) nounwind
  br label %_ZNSsD1Ev.exit

_ZNSsD1Ev.exit:                                   ; preds = %_ZStlsIcSt11char_traitsIcESaIcEERSt13basic_ostreamIT_T0_ES7_RKSbIS4_S5_T1_E.exit, %_ZN9__gnu_cxxL27__exchange_and_add_dispatchEPii.exit.i.i.i, %51
  call void @llvm.lifetime.end(i64 -1, i8* %6)
  %52 = add nsw i32 %i.016, 1
  %53 = icmp slt i32 %52, 6
  br i1 %53, label %7, label %54

; <label>:54                                      ; preds = %_ZNSsD1Ev.exit
  ret i32 0

; <label>:55                                      ; preds = %26, %_ZN9__gnu_cxxL27__exchange_and_add_dispatchEPii.exit.i.i.i7, %10
  call void @llvm.lifetime.end(i64 -1, i8* %12)
  resume { i8*, i32 } %11
}

declare i32 @__gxx_personality_v0(...)

declare %"class.std::basic_ostream"* @_ZSt16__ostream_insertIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_PKS3_l(%"class.std::basic_ostream"*, i8*, i64)

declare %"class.std::basic_string"* @_ZNSs6assignEPKcm(%"class.std::basic_string"*, i8*, i64)

declare void @_ZNSs4_Rep10_M_destroyERKSaIcE(%"struct.std::basic_string<char, std::char_traits<char>, std::allocator<char> >::_Rep"*, %"class.std::allocator"*) nounwind

declare extern_weak i32 @pthread_cancel(i64)

define internal void @_GLOBAL__I_a() section ".text.startup" {
  tail call void @_ZNSt8ios_base4InitC1Ev(%"class.std::ios_base::Init"* @_ZStL8__ioinit)
  %1 = tail call i32 @__cxa_atexit(void (i8*)* bitcast (void (%"class.std::ios_base::Init"*)* @_ZNSt8ios_base4InitD1Ev to void (i8*)*), i8* getelementptr inbounds (%"class.std::ios_base::Init"* @_ZStL8__ioinit, i64 0, i32 0), i8* @__dso_handle) nounwind
  ret void
}

declare void @llvm.lifetime.start(i64, i8* nocapture) nounwind

declare void @llvm.lifetime.end(i64, i8* nocapture) nounwind

!0 = metadata !{metadata !"any pointer", metadata !1}
!1 = metadata !{metadata !"omnipotent char", metadata !2}
!2 = metadata !{metadata !"Simple C/C++ TBAA"}
!3 = metadata !{metadata !"branch_weights", i32 64, i32 4}
!4 = metadata !{metadata !"int", metadata !1}
!5 = metadata !{metadata !"long", metadata !1}
